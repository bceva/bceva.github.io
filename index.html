<html>
<head>
	<meta charset="UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="ie=edge"/>
	<title>Yellow Taxi Data Assignment</title>
	
</head>

<body>
	<h1> Yellow Taxi Data </h1>

        <table id='table'>
            
            <tr>
                <th>VendorID</th>
                <th>tpep_pickup_datetime</th>
                <th>tpep_dropoff_datetime</th>
                <th>passenger_count</th>
                <th>trip_distance</th>
                <th>RatecodeID</th>
                <th>store_and_fwd_flag</th>
                <th>PULocationID</th>
                <th>DOLocationID</th>
                <th>payment_type</th>
                <th>fare_amount</th>
                <th>extra</th>
                <th>mta_tax</th>
                <th>tip_amount</th>
                <th>tolls_amount</th>
                <th>improvement_surcharge</th>
                <th>total_amount</th>
            </tr>


        <script>
  let arrTaxi;
  
  let get_data = async() => {
    let url = "https://data.cityofnewyork.us/resource/t29m-gskq.json";
    let response = await fetch (url);
    arrTaxi = await response.json();	// fill array with data.
    
    make_the_table();		// convert data to table.
  }  
  
  let make_the_table = () => {
    // Extract value from table header.
    let col = [];
    for (let i = 0; i < arrTaxi.length; i++) {
      for (let key in arrTaxi[i]) {
        if (col.indexOf(key) === -1) {
          col.push(key);
        }
      }
    }

    // Create a table.
    const table = document.createElement("table");

    // Create table header row using the extracted headers above.
    let tr = table.insertRow(-1);                 // table row.

    for (let i = 0; i < col.length; i++) {
      let th = document.createElement("th");      // table header.
      th.innerHTML = col[i];
      tr.appendChild(th);
    }

    // add json data to the table as rows.
    for (let i = 0; i < arrTaxi.length; i++) {

      tr = table.insertRow(-1);

      for (let j = 0; j < col.length; j++) {
        let tabCell = tr.insertCell(-1);
        tabCell.innerHTML = arrTaxi[i][col[j]];
      }
    }

    // Now, add the newly created table with json data, to a container.
    const divShowData = document.getElementById('showData');
    divShowData.innerHTML = "";
    divShowData.appendChild(table);
  }
</script>

	<!--<script>
		const api_url ='https://data.cityofnewyork.us/resource/t29m-gskq.json'
		
		async function getdata(){
			const response = await fetch(api_url);
			const data = await response.json()
			const { VendorID, tpep_pickup_datetime, tpep_dropoff_datetime, passenger_count,trip_distance, RatecodeID, store_and_fwd_flag, PULocationID, DOLocationID,	payment_type, fare_amount, extra, mta_tax, tip_amount, tolls_amount, improvement_surcharge, total_amount} = data; 

			document.getElementById('vendor').textcontext=VendorID;
			document.getElementById('pickup').textcontext=tpep_pickup_datetime;
			document.getElementById('dropoff').textcontext=tpep_dropoff_datetime;
			document.getElementById('passenger').textcontext=passenger_count;
			document.getElementById('distance').textcontext=trip_distance;
			document.getElementById('rate').textcontext=RatecodeID;
			document.getElementById('store').textcontext=store_and_fwd_flag;
			document.getElementById('PULocation').textcontext=PULocationID;
			document.getElementById('DOLocation').textcontext=DOLocationID;
			document.getElementById('payment').textcontext=payment_type;
			document.getElementById('fare').textcontext=fare_amount;
			document.getElementById('extra').textcontext=extra;
			document.getElementById('mta').textcontext=mta_tax;
			document.getElementById('tip').textcontext=tip_amount;
			document.getElementById('tolls').textcontext=tolls_amount;
			document.getElementById('improvement').textcontext=improvement_surcharge;
			document.getElementById('total').textcontext=total_amount;
		}
		getdata();


	</script>-->
	
</body>
</html>